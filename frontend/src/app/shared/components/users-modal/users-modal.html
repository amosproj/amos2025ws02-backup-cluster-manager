<!-- add-users-modal.html -->
<div
  *ngIf="open"
  class="fixed inset-0 z-50 flex justify-center items-center overflow-y-auto bg-opacity-40"
  tabindex="-1"
  aria-modal="true"
  role="dialog"
>
  <div class="relative p-4 w-full max-w-md">
    <div class="bg-neutral-primary-soft border border-default rounded-base shadow-sm p-4 md:p-6">
      <!-- Modal Header -->
      <div class="flex items-center justify-between border-b border-default pb-4">
        <h3 class="text-lg font-medium text-heading">
          {{ mode === 'create' ? 'Add User' : mode === 'edit' ? 'Edit User' : 'Delete User' }}
        </h3>
        <button
          (click)="close()"
          class="w-9 h-9 flex justify-center items-center"
          aria-label="Close"
        >
          <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none">
            <path
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18 17.94 6M18 18 6.06 6"
            />
          </svg>
        </button>
      </div>

      <!-- Delete Confirmation -->
      <form *ngIf="mode === 'delete'" (ngSubmit)="onSubmit()">
        <div class="py-4">
          <p class="text-sm text-body mb-4">
            Are you sure you want to delete user
            <span class="font-semibold text-heading">{{ user?.name }}</span>?
          </p>
        </div>
        <div class="flex justify-end space-x-3 border-t border-default pt-4">
          <button type="submit" class="px-4 py-2 text-sm bg-red-600 text-white rounded-base">Delete</button>
          <button type="button" (click)="close()" class="px-4 py-2 text-sm bg-neutral-secondary-medium rounded-base">Cancel</button>
        </div>
      </form>

      <!-- Create Form -->
      <form *ngIf="mode === 'create'" (ngSubmit)="onSubmit()">
        <div class="grid gap-4 py-4">
          <div>
            <label class="block mb-2 text-sm font-medium text-heading" for="create-name">Name</label>
            <input id="create-name" type="text" [(ngModel)]="formData.name" name="name" class="w-full bg-neutral-secondary-medium border border-default-medium rounded-base px-3 py-2.5" placeholder="Username" required />
          </div>
          <div>
            <label class="block mb-2 text-sm font-medium text-heading" for="create-password">Password</label>
            <input id="create-password" type="password" [(ngModel)]="formData.passwordHash" name="passwordHash" class="w-full bg-neutral-secondary-medium border border-default-medium rounded-base px-3 py-2.5" placeholder="Password" required />
          </div>
          <div class="flex gap-6">
            <label class="flex items-center gap-2 text-sm">
              <input type="radio" [(ngModel)]="formData.status" name="status" [value]="false" />
              Disabled
            </label>
            <label class="flex items-center gap-2 text-sm">
              <input type="radio" [(ngModel)]="formData.status" name="status" [value]="true" />
              Enabled
            </label>
          </div>
        </div>
        <div class="flex items-center space-x-4 border-t border-default pt-4">
          <button type="submit" class="px-4 py-2.5 bg-brand text-white rounded-base">Add User</button>
          <button type="button" (click)="close()" class="px-4 py-2.5 bg-neutral-secondary-medium rounded-base">Cancel</button>
        </div>
      </form>

      <!-- Edit Form -->
      <form *ngIf="mode === 'edit'" (ngSubmit)="onSubmit()">
        <div class="grid gap-4 py-4">
          <div>
            <label class="block mb-2 text-sm font-medium text-heading" for="edit-name">Name</label>
            <input id="edit-name" type="text" [(ngModel)]="formData.name" name="name" class="w-full bg-neutral-secondary-medium border border-default-medium rounded-base px-3 py-2.5" placeholder="Username" required />
          </div>
          <div class="flex gap-6">
            <label class="flex items-center gap-2 text-sm">
              <input type="radio" [(ngModel)]="formData.status" name="status" [value]="false" />
              Disabled
            </label>
            <label class="flex items-center gap-2 text-sm">
              <input type="radio" [(ngModel)]="formData.status" name="status" [value]="true" />
              Enabled
            </label>
          </div>
        </div>
        <div class="flex items-center space-x-4 border-t border-default pt-4">
          <button type="submit" class="px-4 py-2.5 bg-brand text-white rounded-base">Save Changes</button>
          <button type="button" (click)="close()" class="px-4 py-2.5 bg-neutral-secondary-medium rounded-base">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>
